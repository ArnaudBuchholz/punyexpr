!function(r){"use strict";var e="string";const i="identifier";const d="symbol";const t={};const l={},v=[e,e,"number","boolean",i,d,t,l],n=new RegExp([/'((?:[^'\\]|\\.)*)'/,/"((?:[^"\\]|\\.)*)"/,/((?:\d+(?:\.\d*)?|\.\d+))/,/(true|false)/,/([a-zA-Z_][a-zA-Z_0-9]*)/,/(\+|-|\*|\/|\[|\]|\.|\?|:)/,/(\s)/,/(.)/].map(r=>{r=r.toString();return r.substring(1,r.length-1)}).join("|"),"g"),p=[r=>r.replace(/\\'/g,"'"),r=>r.replace(/\\"/g,'"'),r=>parseFloat(r),r=>"true"===r];class x extends Error{constructor(r,e,t){super(e),this.name=r,this.offset=t}}x.t=(r,e,t)=>{throw new x(r,e,t)};const E=2,o=r=>{const s=r=>x.t("InvalidTokenError","Invalid token @"+r,r),c=[];let u=0,a=t;const i=[t,d];return r.replace(n,(r,...e)=>{var t=e.findIndex(r=>void 0!==r),e=e[t];let n;var o=p[t],o=(n=o?o(e):e,v[t]);i.includes(o)||i.includes(a)||s(u),(a=v[t])===l&&s(u),c.push([a,n,u]),u+=e.length}),c.filter(([r])=>r!==t)},f=(r,...e)=>Object.assign(r.bind(null,...e),{op:r.name,args:e}),b={o(r){return r},u(t,r){const n=r.pop();var e=r.shift();return r.reduce((r,e)=>t(r,e,n),e(n))},add(...r){return b.u((r,e,t)=>r+e(t),r)},sub(...r){return b.u((r,e,t)=>r-e(t),r)},get(r,e){return e[r(e)]},i(r,e,t,n){return(r(n)?e:t)(n)}};e=r=>{const e=(t=>{const n=()=>t[0],r=()=>n()[E],o=(r=1)=>{var e=t.slice(0,r);return t=t.slice(r),e},s=(r=void 0)=>{var[e,t]=n()||[];return e===d&&(!r||r.includes(t))},c=()=>{0===t.length&&x.t("EndOfExpressionError","Unexpected end of expression")},u=()=>x.t("UnexpectedTokenError","Unexpected token @"+r(),r()),a={l(){c(),s()&&u();var[[r,e]]=o();return r===i?f(b.get,f(b.o,e)):f(b.o,e)},v(){let r=a.l();if(n())for(;s("-+");){var[[,e]]=o(),t=a.l();r="+"===e?f(b.add,r,t):f(b.sub,r,t)}return r},p(){var r,e,t=a.v();return n()&&s("?")?(o(),r=a.g(),c(),s(":")||u(),o(),e=a.g(),f(b.i,t,r,e)):t},g(){return a.p()}};var e=a.g();return 0!==t.length&&x.t("UnexpectedRemainderError","Unexpected left over tokens @"+r(),r()),e})(o(r));return Object.assign(function(r={}){try{return e(r)}catch(r){return""}},{impl:e,str:r})};Object.assign(e,{tokenize:o,Error:x}),r.k=e}(this);
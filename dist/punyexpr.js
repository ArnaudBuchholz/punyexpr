!function(e){"use strict";
const u="literal",j="identifier",O="symbol";
class q extends Error{constructor(e,t,r){super(t),this.name=e,this.offset=r}}q.throw=(e,t,r)=>{throw new q(e,t,r)};
const n=(()=>{const r="abstract,arguments,await,boolean,break,byte,case,catch,char,class,const,continue,debugger,default,delete,do,double,else,enum,eval,export,extends,final,finally,float,for,function,goto,if,implements,import,in,instanceof,int,interface,let,long,native,new,package,private,protected,public,return,short,static,super,switch,synchronized,this,throw,throws,transient,try,var,void,volatile,while,with,yield".split(",");
const t=new RegExp([/'((?:[^'\\]|\\.)*)'/,/"((?:[^"\\]|\\.)*)"/,/((?:\d+(?:\.\d*)?|\.\d+))/,/([a-zA-Z_][a-zA-Z_0-9]*)/,/(\+|-|\*|\/|\[|\]|\.|\?|:|%|<|=|>|!|&|\||\(|\)|,)/,/(\s)/,/(.)/].map(e=>{e=e.toString();
return e.substring(1,e.length-1)}).join("|"),"g"),i=e=>q.throw("InvalidTokenError","Invalid token @"+e,e),n={true:!0,false:!1,undefined:void 0,null:null},c=[e=>[u,e.replace(/\\'/g,"'")],e=>[u,e.replace(/\\"/g,'"')],e=>[u,parseFloat(e)],(e,t)=>Object.prototype.hasOwnProperty.call(n,e)?[u,n[e]]:(r.includes(e)&&i(t),[j,e]),e=>[O,e],e=>[],(e,t)=>i(t)];
return e=>{const o=[];
let s=0,l;
const a=[u,j];
return e.replace(t,(e,...t)=>{var r=t.findIndex(e=>void 0!==e),t=t[r],[r,n]=(0,c[r])(t,s);
a.includes(r)&&a.includes(l)&&i(s),void 0!==(l=r)&&o.push([r,n,s]),s+=t.length}),o}})(),o=(()=>{const a=(e,...t)=>Object.assign(e[1].bind(null,...t),{op:e[0],args:t}),l=["constant",e=>e],r=["rootGet",(e,t)=>t[e(t)]],o=["get",(e,t,r)=>e(r)[t(r)]],i=["not",(e,t)=>!e(t)];
const c=["add",(e,t,r)=>e(r)+t(r)],u=["sub",(e,t,r)=>e(r)-t(r)];
const n=["ternary",(e,t,r,n)=>(e(n)?t:r)(n)],d=["getTypeof",(e,t)=>typeof e(t)],p=["call",(e,t,r)=>e(r).apply(null,t.map(e=>e(r)))],s=e=>{0===e.length&&q.throw("EndOfExpressionError","Unexpected end of expression")},h=e=>(s(e),e[0]),f=e=>h(e)[2],g=(e,t=1)=>e.splice(0,t),v=(e,t=void 0)=>{var[e,r]=e[0]||[];
return e===O&&(!t||t.includes(r))},b=(e,t)=>{var r=t.reduce((e,t)=>Math.max(e,t.length),0),r=e.slice(0,r);
let n=r.findIndex(([e])=>e!==O);
-1===n&&(n=r.length);
const o=r.slice(0,n).map(([,e])=>e).join("");
r=t.filter(e=>o.startsWith(e)).sort((e,t)=>t.length-e.length)[0];
return!!r&&(g(e,r.length),r)},w=e=>q.throw("UnexpectedTokenError","Unexpected token @"+f(e),f(e));
var e=(o,s)=>{const l=Object.keys(s);
return e=>{let t=o(e),r=b(e,l);
for(;
r;
){var n=o(e);
t=a(s[r],t,n),r=b(e,l)}return t}};
const y=e=>{var t;
return v(e,"(")?(g(e),t=E(e),v(e,")")||w(e),g(e),t):(t=e,[[t,e]]=(s(t),v(t)&&w(t),g(t)),t===j?a(r,a(l,e)):a(l,e))},x=e=>{let t=y(e);
for(;
v(e,"[.");
){var r,[[,n]]=g(e);
t="."===n?([n,r]=h(e),n!==j&&w(e),g(e),a(o,t,a(l,r))):(n=E(e),v(e,"]")||w(e),g(e),a(o,t,n))}return t};
const m=e(e(e(e(e(e(e(e=>{var[t,r]=h(e);
if(!(v(e,"+-!")||t===j&&"typeof"===r)){var n=e,t=x(n);
if(v(n,"(")){g(n);
for(var o=[];
!v(n,")");
)0<o.length&&(v(n,",")||w(n),g(n)),o.push(k(n));
return g(n),a(p,t,o)}return t}g(e);
let s=E(e);
return s="+"===r?a(c,a(l,0),s):"-"===r?a(u,a(l,0),s):"!"===r?a(i,s):a(d,s)},{"**":["exp",(e,t,r)=>e(r)**t(r)]}),{"*":["mul",(e,t,r)=>e(r)*t(r)],"/":["div",(e,t,r)=>e(r)/t(r)],"%":["remainder",(e,t,r)=>e(r)%t(r)]}),{"+":c,"-":u}),{"<":["lt",(e,t,r)=>e(r)<t(r)],">":["gt",(e,t,r)=>e(r)>t(r)],"<=":["lte",(e,t,r)=>e(r)<=t(r)],">=":["gte",(e,t,r)=>e(r)>=t(r)]}),{"==":["eq",(e,t,r)=>e(r)==t(r)],"!=":["neq",(e,t,r)=>e(r)!=t(r)],"===":["eqq",(e,t,r)=>e(r)===t(r)],"!==":["neqq",(e,t,r)=>e(r)!==t(r)]}),{"&&":["and",(e,t,r)=>e(r)&&t(r)]}),{"||":["or",(e,t,r)=>e(r)||t(r)]}),k=e=>{var t,r=m(e);
return 0!==e.length&&b(e,["?"])?(t=k(e),s(e),v(e,":")||w(e),g(e),e=k(e),a(n,r,t,e)):r},E=k;
return e=>{var t=E(e);
return 0!==e.length&&q.throw("UnexpectedRemainderError","Unexpected left over tokens @"+f(e),f(e)),t}})(),s=e=>({value:e,writable:!1}),l=(e,r)=>{Object.defineProperties(e,Object.keys(r).reduce((e,t)=>(e[t]=s(r[t]),e),{}))};
var t=e=>{const t=o(n(e));
function r(e={}){try{return t(e)}catch(e){return""}}return l(r,{impl:t,str:e}),r};
l(t,{tokenize:n,Error:q,version:"1.0.0"}),e.punyexpr=t}(this);

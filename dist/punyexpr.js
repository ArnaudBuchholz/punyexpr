!function(e){"use strict";const u="literal",O="identifier",j="symbol";class U extends Error{constructor(e,t,r){super(t),this.name=e,this.offset=r}}U.t=(e,t,r)=>{throw new U(e,t,r)};const n=(()=>{const r="abstract,arguments,await,boolean,break,byte,case,catch,char,class,const,continue,debugger,default,delete,do,double,else,enum,eval,export,extends,final,finally,float,for,function,goto,if,implements,import,in,instanceof,int,interface,let,long,native,new,package,private,protected,public,return,short,static,super,switch,synchronized,this,throw,throws,transient,try,var,void,volatile,while,with,yield".split(",");const t=new RegExp([/'((?:[^'\\]|\\.)*)'/,/"((?:[^"\\]|\\.)*)"/,/((?:\d+(?:\.\d*)?|\.\d+))/,/([a-zA-Z_][a-zA-Z_0-9]*)/,/(\+|-|\*|\/|\[|\]|\.|\?|:|%|<|=|>|!|&|\||\(|\))/,/(\s)/,/(.)/].map(e=>{e=e.toString();return e.substring(1,e.length-1)}).join("|"),"g"),c=e=>U.t("InvalidTokenError","Invalid token @"+e,e),n={true:!0,false:!1,undefined:void 0,null:null},l=[e=>[u,e.replace(/\\'/g,"'")],e=>[u,e.replace(/\\"/g,'"')],e=>[u,parseFloat(e)],(e,t)=>Object.prototype.hasOwnProperty.call(n,e)?[u,n[e]]:(r.includes(e)&&c(t),[O,e]),e=>[j,e],e=>[],(e,t)=>c(t)];return e=>{const o=[];let a=0,s;const i=[u,O];return e.replace(t,(e,...t)=>{var r=t.findIndex(e=>void 0!==e),t=t[r],[r,n]=(0,l[r])(t,a);i.includes(r)&&i.includes(s)&&c(a),void 0!==(s=r)&&o.push([r,n,a]),a+=t.length}),o}})(),o=(()=>{const i=(e,...t)=>Object.assign(e.bind(null,...t),{op:e.name,args:t}),o=e=>e,r=(e,t)=>t[e(t)],a=(e,t,r)=>e(r)[t(r)],s=(e,t)=>!e(t);const c=(e,t,r)=>e(r)+t(r),l=(e,t,r)=>e(r)-t(r);const n=(e,t,r,n)=>(e(n)?t:r)(n),u=(e,t)=>typeof e(t),d=(e,t,r)=>e(r).apply(null,t.map(e=>e(r))),v=e=>{0===e.length&&U.t("EndOfExpressionError","Unexpected end of expression")},f=e=>(v(e),e[0]),p=e=>f(e)[2],h=(e,t=1)=>e.splice(0,t),b=(e,t=void 0)=>{var[e,r]=e[0]||[];return e===j&&(!t||t.includes(r))},g=(e,t)=>{var r=t.reduce((e,t)=>Math.max(e,t.length),0),r=e.slice(0,r);let n=r.findIndex(([e])=>e!==j);-1===n&&(n=r.length);const o=r.slice(0,n).map(([,e])=>e).join("");r=t.filter(e=>o.startsWith(e)).sort((e,t)=>t.length-e.length)[0];return!!r&&(h(e,r.length),r)},w=e=>U.t("UnexpectedTokenError","Unexpected token @"+p(e),p(e));var e=(o,a)=>{const s=Object.keys(a);return e=>{let t=o(e),r=g(e,s);for(;r;){var n=o(e);t=i(a[r],t,n),r=g(e,s)}return t}};const x=e=>{var t;return b(e,"(")?(h(e),t=m(e),b(e,")")||w(e),h(e),t):(t=e,[[t,e]]=(v(t),b(t)&&w(t),h(t)),t===O?i(r,i(o,e)):i(o,e))},y=e=>{let t=x(e);for(;b(e,"[.");){var r,[[,n]]=h(e);t="."===n?([n,r]=f(e),n!==O&&w(e),h(e),i(a,t,i(o,r))):(n=m(e),b(e,"]")||w(e),h(e),i(a,t,n))}return t};const E=e(e(e(e(e(e(e(e=>{var[t,r]=f(e),t=b(e,"+-!")||t===O&&"typeof"===r;t&&h(e);let n=(e=>{var t=y(e);if(b(e,"(")){h(e);for(var r=[];!b(e,")");)0<r.length&&!b(e,",")&&w(e),h(e),r.push(k);return h(e),i(d,t,r)}return t})(e);return n=t?"+"===r?i(c,i(o,0),n):"-"===r?i(l,i(o,0),n):"!"===r?i(s,n):i(u,n):n},{o:(e,t,r)=>e(r)**t(r)}),{i:(e,t,r)=>e(r)*t(r),l:(e,t,r)=>e(r)/t(r),u:(e,t,r)=>e(r)%t(r)}),{v:c,p:l}),{h:(e,t,r)=>e(r)<t(r),g:(e,t,r)=>e(r)>t(r),k:(e,t,r)=>e(r)<=t(r),m:(e,t,r)=>e(r)>=t(r)}),{O:(e,t,r)=>e(r)==t(r),j:(e,t,r)=>e(r)!=t(r),U:(e,t,r)=>e(r)===t(r),A:(e,t,r)=>e(r)!==t(r)}),{I:(e,t,r)=>e(r)&&t(r)}),{R:(e,t,r)=>e(r)||t(r)}),k=e=>{var t,r=E(e);return 0!==e.length&&g(e,["?"])?(t=k(e),v(e),b(e,":")||w(e),h(e),e=k(e),i(n,r,t,e)):r},m=k;return e=>{var t=m(e);return 0!==e.length&&U.t("UnexpectedRemainderError","Unexpected left over tokens @"+p(e),p(e)),t}})(),a=e=>({value:e,writable:!1}),s=(e,r)=>{Object.defineProperties(e,Object.keys(r).reduce((e,t)=>(e[t]=a(r[t]),e),{}))};var t=e=>{const t=o(n(e));function r(e={}){try{return t(e)}catch(e){return""}}return s(r,{impl:t,str:e}),r};s(t,{tokenize:n,Error:U,version:"1.0.0"}),e.T=t}(this);